# 部署测试流程文件
POST http://localhost:8090/activity/deploy
Content-Type: application/x-www-form-urlencoded

###

# 开始一个流程，并设置初始的流程节点人员
# 注意，这里为了展示动态负责人修改，后面的人员名称会被修改
POST http://localhost:8090/activity/start
Content-Type: application/json

{
  "gm": "gm",
  "dm": "dm",
  "hr": "hr"
}

###
# 查询实例列表，应该有一条流程
POST http://localhost:8090/activity/instance/list
Content-Type: application/x-www-form-urlencoded


###
# 查看这个流程的进度
POST http://localhost:8090/activity/instance/history
Content-Type: application/x-www-form-urlencoded

instanceId=10001

###
# 查询gm这个人的任务列表，因为流程开始之后，第一个负责人就是gm
# 所以他一定有一条记录
POST http://localhost:8090/activity/task/list
Content-Type: application/x-www-form-urlencoded

who=gm

###
# gm完成他的任务，并且变更下一个负责人为ndm
POST http://localhost:8090/activity/task/complete/10008
Content-Type: application/json

{
  "gm": "gm",
  "dm": "ndm",
  "hr": "hr"
}

###
# 可以在此查看进度，流程流转
POST http://localhost:8090/activity/instance/history
Content-Type: application/x-www-form-urlencoded

instanceId=10001


###
# 此时流程已经交由ndm负责，依旧使用dm查询，应该无结果
POST http://localhost:8090/activity/task/list
Content-Type: application/x-www-form-urlencoded

who=ndm


###
# ndm 也完成自己的任务，并重新交给nhr负责
POST http://localhost:8090/activity/task/complete/12502
Content-Type: application/json

{
  "gm": "gm",
  "dm": "ndm",
  "hr": "nhr"
}


###
# 再次查看流程进度
POST http://localhost:8090/activity/instance/history
Content-Type: application/x-www-form-urlencoded

instanceId=10001

###
# nhr查看自己的任务
POST http://localhost:8090/activity/task/list
Content-Type: application/x-www-form-urlencoded

who=nhr

###
# nhr完成自己的任务，流程结束
POST http://localhost:8090/activity/task/complete/15002
Content-Type: application/json

{
  "gm": "gm",
  "dm": "ndm",
  "hr": "nhr"
}

###
# 可以看到所有流程结束
POST http://localhost:8090/activity/instance/history
Content-Type: application/x-www-form-urlencoded

instanceId=10001

###
# 此时查询实例列表，已经没有记录了
POST http://localhost:8090/activity/instance/list
Content-Type: application/x-www-form-urlencoded
